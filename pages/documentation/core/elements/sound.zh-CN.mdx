import {Callout, Tabs, Steps} from 'nextra/components';

# 声音

<Callout type="warning" emoji="⚠️">
    本页面正在建设中
</Callout>

<Callout type="warning" emoji="⚠️">
    测试功能，可能会有变动
</Callout>

Sound 控制游戏中的声音

## 静态方法

### voice

<Steps>

创建一个语音声音

```ts
const voice = Sound.voice({
    src: 'voice.mp3',
});

// 等同于
const voice = new Sound({
    src: 'voice.mp3',
    type: SoundType.Voice,
});
```

- `arg0: Partial<ISoundUserConfig> | string` - 声音的配置或声音源，参见 [ISoundUserConfig](../types/ISoundUserConfig)
- 返回 `Sound`

</Steps>

### bgm

<Steps>

创建一个背景音乐

- `arg0: Partial<ISoundUserConfig> | string` - 声音的配置或声音源，参见 [ISoundUserConfig](../types/ISoundUserConfig)
- 返回 `Sound`

</Steps>

### sound

<Steps>

创建一个声音

- `arg0: Partial<ISoundUserConfig> | string` - 声音的配置或声音源，参见 [ISoundUserConfig](../types/ISoundUserConfig)
- 返回 `Sound`

</Steps>

## 公共方法

### constructor

<Steps>

#### 重载 1 / 2

- `config?: Partial<ISoundUserConfig>` - 参见 [ISoundUserConfig](../types/ISoundUserConfig)

#### 重载 2 / 2

- `src?: string` - 声音的源文件路径

</Steps>

## 可链式方法

### play

<Steps>

播放声音并等待其结束

> **提示**: 标记为 `Bgm` 的声音不能直接播放。

```ts
const sound = new Sound({
    src: 'sound.mp3',
});
scene.action([
    sound.play(1000), // 播放并淡入 1 秒
]);
```

- `duration?: number` - 淡入淡出持续时间（以毫秒为单位）

</Steps>

### stop

<Steps>

停止声音。停止后，声音将回到开头

- `duration?: number` - 淡入淡出持续时间（以毫秒为单位）

</Steps>

### fade

<Steps>

淡入淡出声音

- `start: number | undefined` - 起始音量，从 0 到 1，默认为当前音量
- `end: number` - 结束音量，从 0 到 1
- `duration: number` - 持续时间（以毫秒为单位）

```ts
const sound = new Sound({
    src: 'sound.mp3',
    volume: 0,
});
scene.action([
    sound
        .play()
        .fade(0, 1, 1000), // 淡入 1 秒
]);
```

</Steps>

### setVolume

<Steps>

设置声音的音量

- `volume: number` - 音量，从 0 到 1
- `duration?: number` - 淡入淡出持续时间（以毫秒为单位）

</Steps>

### setRate

<Steps>

设置声音的播放速率

- `rate: number` - 速率，基准为 1

</Steps>

### pause

<Steps>

暂停声音

- `duration?: number` - 淡入淡出持续时间（以毫秒为单位）

</Steps>

### resume

<Steps>

恢复播放声音

- `fade?: number` - 淡入淡出持续时间（以毫秒为单位）

</Steps>